<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de P√°gina Anime H</title>
  <style>
    body {
      background: #0d0d0d;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1 { text-align: center; }
    form {
      max-width: 600px;
      margin: auto;
      background: #181818;
      padding: 20px;
      border-radius: 10px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, textarea {
      width: 100%;
      margin-top: 5px;
      padding: 10px;
      border: none;
      border-radius: 5px;
      background: #222;
      color: #fff;
    }
    button {
      background: #ff4444;
      border: none;
      padding: 10px 20px;
      color: white;
      border-radius: 5px;
      margin-top: 20px;
      cursor: pointer;
      font-size: 1em;
    }
    button:hover { background: #ff6666; }
    .add-btn { background: #007bff; margin-top: 10px; }

    .suggestions {
      position: relative;
    }
    .suggestion-list {
      position: absolute;
      background: #222;
      border: 1px solid #333;
      border-radius: 5px;
      width: 100%;
      max-height: 150px;
      overflow-y: auto;
      z-index: 100;
      display: none;
    }
    .suggestion-list div {
      padding: 8px;
      cursor: pointer;
    }
    .suggestion-list div:hover {
      background: #444;
    }
  </style>
</head>
<body>
  <h1>üé¥ Generador Autom√°tico de P√°gina Anime H</h1>
  <form id="generatorForm">
    <label>T√≠tulo:</label>
    <input type="text" id="title" required>

    <label>G√©neros:</label>
    <div class="suggestions">
      <input type="text" id="genres" placeholder="Empieza a escribir (ej: Drama, Romance...)">
      <div class="suggestion-list" id="genreList"></div>
    </div>

    <label>Idiomas:</label>
    <input type="text" id="languages" placeholder="Ej: Subtitulado, Latino">

    <label>Descripci√≥n:</label>
    <textarea id="description" rows="4" required></textarea>

    <label>Rating:</label>
    <input type="text" id="rating" placeholder="Ej: 8.73">

    <label>Status:</label>
    <input type="text" id="status" placeholder="Ej: En emisi√≥n, Finalizado">

    <label>A√±o:</label>
    <input type="text" id="year" placeholder="Ej: 2025">

    <label>Vistas:</label>
    <input type="text" id="views" placeholder="Ej: 2.5M">

    <label>Clasificaci√≥n:</label>
    <input type="text" id="classification" placeholder="Ej: +13 a√±os">

    <label>Fecha de Estreno:</label>
    <input type="text" id="releaseDate" placeholder="Ej: 06 de julio de 2025">

    <label>Imagen de fondo:</label>
    <input type="url" id="backgroundImage" placeholder="https://...">

    <hr>
    <h3>üñºÔ∏è Generador autom√°tico de im√°genes del manga</h3>
    <label>URL Base:</label>
    <input type="url" id="mangaBase" placeholder="https://es.3hentai.net/dji8wuwb9">

    <label>Cantidad de im√°genes:</label>
    <input type="number" id="mangaCount" placeholder="Ej: 27">

    <button type="button" class="add-btn" id="generateMangaImgs">Generar im√°genes autom√°ticas</button>

    <label>Im√°genes del Manga (tambi√©n puedes a√±adir manualmente):</label>
    <div id="imageList">
      <input type="url" class="mangaImg" placeholder="https://...">
    </div>
    <button type="button" class="add-btn" id="addImage">+ Agregar otra imagen</button>

    <button type="submit">Generar P√°gina</button>
  </form>

<script>
  // --- Lista de g√©neros ---
  const genres = [
    "Acci√≥n", "Aventura", "Comedia", "Drama", "Romance", "Fantas√≠a",
    "Ciencia Ficci√≥n", "Terror", "Misterio", "Sobrenatural", "Escolar",
    "Musical", "Psicol√≥gico", "Deportes", "Recuentos de la Vida",
    "Isekai", "Hist√≥rico", "Militar", "Crimen", "Ecchi", "Shonen",
    "Shojo", "Horror", "Tragedia", "Inkaflix", "ManGat"
  ];

  const genreInput = document.getElementById("genres");
  const genreList = document.getElementById("genreList");

  genreInput.addEventListener("input", () => {
    const query = genreInput.value.split(",").pop().trim().toLowerCase();
    genreList.innerHTML = "";
    if (!query) { genreList.style.display = "none"; return; }

    const filtered = genres.filter(g => g.toLowerCase().startsWith(query));
    if (!filtered.length) { genreList.style.display = "none"; return; }

    filtered.forEach(g => {
      const item = document.createElement("div");
      item.textContent = g;
      item.onclick = () => {
        let current = genreInput.value.split(",");
        current[current.length - 1] = " " + g;
        genreInput.value = current.join(",").replace(/^,/, "").trim() + ", ";
        genreList.style.display = "none";
        genreInput.focus();
      };
      genreList.appendChild(item);
    });

    genreList.style.display = "block";
  });

  document.addEventListener("click", (e) => {
    if (!genreList.contains(e.target) && e.target !== genreInput) {
      genreList.style.display = "none";
    }
  });

  // --- Agregar campos manuales ---
  document.getElementById("addImage").addEventListener("click", () => {
    const container = document.getElementById("imageList");
    const input = document.createElement("input");
    input.type = "url";
    input.placeholder = "https://...";
    input.classList.add("mangaImg");
    container.appendChild(input);
  });

  // --- Generar im√°genes autom√°ticas ---
  document.getElementById("generateMangaImgs").addEventListener("click", () => {
    const base = document.getElementById("mangaBase").value.trim();
    const count = parseInt(document.getElementById("mangaCount").value);
    const container = document.getElementById("imageList");

    if (!base || isNaN(count) || count < 1) {
      alert("Por favor ingresa una URL base v√°lida y un n√∫mero mayor a 0.");
      return;
    }

    // Limpia las im√°genes anteriores
    container.innerHTML = "";

    // Genera URLs autom√°ticamente
    for (let i = 1; i <= count; i++) {
      const input = document.createElement("input");
      input.type = "url";
      input.classList.add("mangaImg");
      input.value = `${base}${i}t.jpg`;
      container.appendChild(input);
    }

    alert(`‚úÖ Se generaron ${count} im√°genes autom√°ticamente.`);
  });

  // --- Generar el archivo .txt ---
  document.getElementById("generatorForm").addEventListener("submit", (e) => {
    e.preventDefault();

    const imgs = Array.from(document.querySelectorAll(".mangaImg"))
      .map(i => i.value.trim())
      .filter(v => v !== "");

    const data = {
      title: document.getElementById("title").value,
      genres: document.getElementById("genres").value.split(",").map(x => x.trim()).filter(x => x),
      languages: document.getElementById("languages").value.split(",").map(x => x.trim()),
      description: document.getElementById("description").value,
      rating: document.getElementById("rating").value,
      status: document.getElementById("status").value,
      year: document.getElementById("year").value,
      views: document.getElementById("views").value,
      classification: document.getElementById("classification").value,
      releaseDate: document.getElementById("releaseDate").value,
      backgroundImage: document.getElementById("backgroundImage").value,
      postImages: imgs
    };

    const htmlContent = `
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${data.title}</title>
<style>
body{font-family:Arial;background:#0a0a0a;color:#fff;margin:0;padding:0}
.container{max-width:600px;margin:auto;background:#181818;overflow:hidden}
.anime-header{background-image:url('${data.backgroundImage}');background-size:cover;background-position:center;height:250px;position:relative}
.anime-header::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5)}
.anime-header-content{position:absolute;bottom:10px;left:10px;z-index:1}
.anime-title{font-size:1.5em}
.anime-info span{background:#333;padding:5px 10px;border-radius:5px;font-size:.7em;margin:2px;display:inline-block}
.anime-description{padding:10px;color:#ccc;font-size:.8em}
.post img{width:100%;border-radius:10px;margin:5px 0}
</style>
</head>
<body>
<div class="container">
<div class="anime-header">
  <div class="anime-header-content">
    <h1 class="anime-title">${data.title}</h1>
    <div class="anime-info">${data.genres.map(g=>`<span>${g}</span>`).join('')}</div>
  </div>
</div>
<div class="anime-info">${data.languages.map(l=>`<span>${l}</span>`).join('')}</div>
<div class="anime-description">${data.description}</div>
<div class="anime-info">
  <span>‚≠ê ${data.rating}</span>
  <span>${data.status}</span>
  <span>${data.year}</span>
  <span>${data.views}</span>
</div>
<div class="anime-info">
  <span>${data.classification}</span>
  <span>${data.releaseDate}</span>
</div>
<h2 style="padding:10px">Imagenes del Manga</h2>
${data.postImages.map(img => `<div class="post"><img src="${img}" alt="Imagen del manga"></div>`).join('')}
</div>
</body>
</html>
    `.trim();

    let fileName = prompt("Escribe el nombre del archivo (sin extensi√≥n):", data.title || "pagina-anime");
    if (!fileName) fileName = "pagina-anime";

    const blob = new Blob([htmlContent], { type: "text/plain;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${fileName}.txt`;
    a.click();
    URL.revokeObjectURL(url);
  });
</script>
</body>
</html>
